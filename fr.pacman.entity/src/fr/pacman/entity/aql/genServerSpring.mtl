[module genServerSpring(	'http://www.obeonetwork.org/dsl/entity/3.0.0', 
							'http://www.obeonetwork.org/dsl/environment/3.0.0')									
							extends fr::pacman::entity::aql::genServer/]
									
[comment toujours placer les '@main' au niveau des modules fils, sinon génération incomplète./]
[comment enlever ces imports suite a correction bug./]
[import fr::pacman::core::aql::base/]
[import fr::pacman::common::aql::file::genEntityAbs/]
[comment enlever ces imports suite a correction bug./]

[import fr::pacman::entity::spring::aql::file::genEntity/]
[import fr::pacman::core::aql::query::reference/]
[import fr::pacman::core::aql::query::entity/]
[import fr::pacman::core::service::DatabaseUtils/]

[comment @main/]
[comment écriture de l'ensemble des entités et des classes pour la couche de persistance./]
[template public genServer(r : entity::Root)]
  [r.super:genServer()/]
  [comment on a besoin des compteurs uniquement pour les relations récursives./]
  [r.do_resetCounters()/]
  [for (e : entity::Entity | r.subTypesEntities())]
    [comment écriture de l'implémentation pour une entité./]
    [e.fileEntityImpl()/]
    [comment écriture de l'interface pour la couche de persistance (repo)./]
    [e.fileEntityPersistItf()/]
    [comment écriture des tests d'intégration pour la persistance./]
    [e.fileOutIntegrationTestImpl(e.referencesFKSB())/]
  [/for]
[/template]